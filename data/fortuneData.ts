export interface RawFortune {
  id: number;
  title: string;
  history: string;  // 詳盡的歷史故事
  story: string;    // 典故精髓
  poem: string[];
  level: string;
  // 修正：加入 meaning 屬性以符合資料內容並解決 TypeScript 錯誤
  meaning?: string;
  advice: string;
  wealth: string;
  career: string;
  romance: string;
  education: string;
  luck: string;
}

export const fortuneData: RawFortune[] = [
  {
    id: 1, title: "甲子 ‧ 包公請雷祖", level: "大吉",
    history: "北宋仁宗年間，開封府尹包拯以清廉剛正著稱。某年盛夏，中原一帶遭逢罕見大旱，數月滴雨未降，田地龜裂且瘟疫肆虐，百姓叫苦連天。包公心懷蒼生，親自前往雷祖廟設壇求雨。他換下蟒袍官服，身著粗布麻衣，赤腳跪於烈日之下的焦土之上，焚香告天。他立誓：若因其為官不周，願受雷霆之災；若上天垂憐，請降甘霖救民。其赤誠與正氣上達天聽，感召雷公電母，頃刻間風雲變色，大雨如注，化解了萬民之苦。這段歷史象徵著「正氣感天」，當個人意志與公義契合時，必能突破困局。",
    story: "正大光明，至誠感天。包公之赤誠能動雷祖，代表正直者終得天助。",
    poem: ["日出便見風雲散", "光明清淨照世間", "一向前途通大道", "萬事清吉保平安"],
    advice: "【大師開示】：此籤乃是六十甲子之首，象徵「守雲見日」。你目前的處境正如同求雨前的包公，雖然乾旱難熬，但你的正直與堅持已被上天看見。大師叮嚀：越是關鍵時刻越要「正道而行」。不要被眼前的迷霧恐嚇，日出的光輝即將驅散所有阻礙，你的前途將是一片通天大道。",
    luck: "雲開見日，諸事大吉。目前是轉運的起點。",
    career: "多年累積即將爆發，適合擴張或轉換跑道，有權威人士提拔。",
    wealth: "正財運極佳，過去的佈局迎來收割；理財宜守正不貪。",
    romance: "誤會冰釋，關係進入深度信任期，單身者有正緣出現。",
    education: "智慧大開，難解課題將迎解而解，考試運勢極佳。",
  },
  {
    id: 2, title: "乙丑 ‧ 薛仁貴回家", level: "上吉",
    history: "唐代名將薛仁貴，早年家道中落，僅能依靠體力維生，但他胸懷壯志。為了報效朝廷，他毅然告別新婚妻子柳金蟬，投軍從戎。在戰場上，他憑藉一身武藝與勇氣，白衣闖敵陣，立下奇功，最終被冊封為平遼王。離家十二載，他身披錦袍、腰掛金印，重回當年居住的破窯。雖然物換星移，但他對妻子的承諾始終變。這段歷史告訴我們：磨練雖長，但只要志向堅定且不忘本心，最終的榮耀將是加倍的圓滿。現在的你，正處於等待收穫的最後階段。",
    story: "苦盡甘來，榮歸故里。多年磨練與堅守，終於換來人生的百花齊放。",
    poem: ["於今此景正當時", "看看欲吐百花魁", "若能立志求謀者", "前途欣然事皆宜"],
    meaning: "時機已到，只要立定志向努力，前途將如百花齊放般美好。",
    advice: "【大師開示】：抽到此籤代表你已經走過了最艱辛的「從軍」期。現在的氣場正如薛仁貴回鄉的前夕。大師叮嚀：你要做的是「確認志向」。如果你心中有明確的目標，不要猶豫，現在就是動手的最佳時機（正當時）。你的努力已經成熟，只等開花結果。",
    luck: "如春天降臨，行動的最佳時刻，凡事皆有轉機。",
    career: "才華獲重視，有升遷之喜。展現領導力，勇於承擔重任。",
    wealth: "財源廣進，名聲帶來的收益增加。適合進行長期穩定的投資。",
    romance: "感情進入甜蜜期，單身者有望在正式場合遇到心儀對象。",
    education: "表現優異，能從競爭中脫穎而出。鑽研專業必成佼佼者。",
  },
  {
    id: 3, title: "丙寅 ‧ 蘇秦背劍", level: "中平",
    history: "戰國時代，蘇秦初出茅廬遊說秦王失敗，回到家鄉後，遭受家人的極大羞辱。他的嫂子不為他準備飯食，妻子在織布機前不肯回頭看他。蘇秦深感羞愧與憤怒，從此閉門不出，沒日沒夜地鑽研《陰符》。每當深夜讀書疲倦欲睡時，他便拿起錐子刺向自己的大腿，以劇痛警醒意志。最終他合縱六國，佩掛六國相印，威震天下。這段歷史是關於「反擊命運」的過程：目前的困頓並非終點，而是讓你儲備能量，日後一鳴驚人的必要磨鍊。",
    story: "懸樑刺股，自我救贖。暫時的冷遇是為了未來的震撼回歸。",
    poem: ["勸君把定心莫虛", "天註衣祿自有餘", "和合重重常吉慶", "時來運到福自居"],
    advice: "【大師開示】：蘇秦背劍代表的是一種「極致的耐力」。如果你現在感到孤立無援或被輕視，請不要急著辯解。大師叮嚀：不要心虛。上天給你的那份「衣祿」還在路上的倉庫裡。你現在的工作是「磨劍」，把專業磨到別人無法忽視的程度。等到時機成熟，福報會主動來找你，不需你苦苦追尋。",
    luck: "運勢處於轉折點。內心不亂，好運隨後而至。",
    career: "適合「修煉」而非「決戰」。提升專業能力是首要任務。",
    wealth: "穩定但尚未爆發。財運已被註定，保持穩健經營。",
    romance: "需要時間證明價值。不要急於確認關係，正確的人會被你吸引。",
    education: "沉心複習，壓力是種扎根。考試定能發揮超水準。",
  },
  {
    id: 4, title: "丁卯 ‧ 漢高祖入關", level: "中平",
    history: "秦朝末年，劉邦率領軍隊率先進入秦都咸陽。面對皇宮中琳瑯滿目的奇珍異寶與絕色佳麗，劉邦險些被眼前的繁華迷惑。所幸張良與樊噲及時進諫，勸他「還軍霸上」，不可迷戀小利。劉邦聽從建議，封存府庫並與百姓約法三章，此舉贏得全天下民心。這段歷史啟示我們：人生的前途雖然看似暢通，但往往佈滿了看不見的誘惑與陷阱。能克制當下的貪婪、以退為進的人，才是最後的贏家。",
    story: "約法三章，收攬民心。前途雖有誘惑與阻礙，唯有守法務實方能長久。",
    poem: ["頭前有路不能行", "加上一番路不平", "執意要行非好事", "終歸必定受虧盈"],
    advice: "【大師開示】：此籤直言「頭前有路不能行」，是一記警鐘。代表你現在追求的計畫或對象，雖然看起來很吸引人，但實際上「路不平」，隱藏著你尚未看見的風險。大師叮嚀：不要「執意要行」。學學劉邦的撤退與約法三章。現在適合回歸基礎，把內功練好。強行推進只會讓你陷入虧損的漩渦。",
    luck: "目前氣場受阻，不宜冒險。回歸家庭或基礎，平安即是福。",
    career: "職場有看不見的牆。建議暫停新計畫，維持現狀最穩。",
    wealth: "財運如水中月。暫緩大筆投資，守住現有資金。",
    romance: "感情中出現阻礙或第三者干擾。切莫強求，給彼此空間。",
    education: "學習效率不彰，切莫死胡同裡鑽。換個學科或方法效果更佳。",
  },
  {
    id: 5, title: "戊辰 ‧ 韓文公被貶", level: "下下",
    history: "唐代文豪韓愈（韓文公）性格剛直不阿。當時唐憲宗迷信佛教，欲勞民傷財地迎請佛骨。韓愈憂心國課，寫下驚世駭俗的《諫迎佛骨表》，言辭激烈觸怒龍顏。憲宗大怒之下，欲處死韓愈，後雖免死卻被貶至偏遠的潮州。韓愈在前往潮州的雪地中，心中淒涼，寫下了「雲橫秦嶺家何在，雪擁藍關馬不前」。這歷史典故象徵：因為過於正直或時機不對，而導致英雄無用武之地的困局。此時若強求名利，如同在貧瘠的石頭上種植蓮花，註定是一場空。",
    story: "忠而見棄，時不我與。在錯誤的時機做正確的事，依然會遭受挫折。",
    poem: ["只恐前途明位少", "不如守舊待時來", "若要此時求名利", "猶如石上種蓮花"],
    advice: "【大師開示】：這是一首警示籤。韓文公的能力毋庸置疑，但他的失敗在於「時機」。目前的你可能正處於一個環境極其不利的階段。大師叮嚀：不要強求，更不要在這個時候與權威對抗。「守舊」不是退縮，而是儲存體力。在石頭上種蓮花是浪費能量，等春天（轉機）來了，你自然會有肥沃的土壤。",
    luck: "氣場受壓制。適合修行與反省的枯水期，不宜大動作。",
    career: "環境不佳。建議低調行事，守住現有崗位，不要急於跳槽。",
    wealth: "財運不佳，投入無產出。守住現有現金是第一要務。",
    romance: "多波折且易有口舌之爭。不宜談論婚嫁，先處理情緒問題。",
    education: "讀書效率低落。建議放慢進度，重新檢查基礎，不要勉強考試。",
  },
  {
    id: 60, title: "癸亥 ‧ 蘇秦佩六國相印", level: "上上",
    history: "經過刺骨苦讀的漫長歲月，蘇秦終於憑藉其過人的才華與辯才，奔走燕、趙、韓、魏、齊、楚六國之間，成功遊說各國國君建立「合縱」聯盟共同抗秦。他最後身披六色錦袍，佩掛六國相印，位極人臣。當他經過故鄉時，當年羞辱他的家人皆俯伏在路旁不敢抬頭。此籤作為六十甲子之終結，象徵著「大圓滿」。代表一個人歷經了五十九個階段的磨練，終於在最後一個階段達到了人生的最高峰。這是智慧、毅力與時機完美契合的結果。",
    story: "功德圓滿，萬里清風。所有磨難化作基石，迎來輝煌的高光時刻。",
    poem: ["月出光輝四海明", "前途祿位見太平", "浮雲散盡見明月", "萬里清風自隨身"],
    advice: "【大師開示】：癸亥是終點，也是新輪迴的起點。你目前的所問之事，已經達到了「圓滿」的境界。大師叮嚀：浮雲已經散盡，現在是你收穫榮耀與太平的時刻。這不僅是物質的成功，更是心靈的自由。請享受此刻的清風，但也要記得保持蘇秦那樣的初心，準備好迎接人生的下一個篇章。",
    luck: "大吉。福祿壽三全，氣場飽滿圓滿。",
    career: "功德圓滿。事業達頂峰，受人景仰，適合開啟下一個大願景。",
    wealth: "財富充盈，福澤子孫。適合進行大格局的資產分配或傳承。",
    romance: "家庭圓滿，感情深厚如海。單身者有天賜良緣，極易成婚。",
    education: "學業精通。不僅是考試成功，而是學問已達化境。",
  }
];

export const getLocalFortune = (id: number): RawFortune => {
  const found = fortuneData.find(f => f.id === id);
  if (found) return found;

  // 對於未手動填寫的 6-59 籤，提供正確的「首句詩文」校對表
  const standardFirstLines: { [key: number]: string } = {
    6: "風恬浪靜可行舟",
    7: "雲開月出正分明",
    8: "禾稻看看結成完",
    9: "龍虎相隨在深山",
    10: "花開結子一半枯",
    11: "靈雞漸漸見分明",
    12: "長江風浪漸漸靜",
    13: "命中正逢羅孛星",
    14: "財中漸漸見分明",
    15: "越過長江萬里身",
    16: "風雲起合在半空",
    17: "俗語說得好長短",
    18: "君爾寬心且忍耐",
    19: "富貴由命天註定",
    20: "蛇身得意化為龍",
    // ...以此類推
  };

  const firstLine = standardFirstLines[id] || `第 ${id} 靈籤最為尊`;

  return {
    id,
    title: `第 ${id} 籤 ‧ 仙師指路`,
    level: "吉",
    history: `在古老的歲月中，每一首靈籤都承載著一段動人的歷史。這段故事講述了主角在面對人生迷惘時，如何透過內心的寧靜與外界的指引，最終走出一條屬於自己的道路。這段歷史提醒我們：世間萬物皆有其規律，花開花落終有時。現在的你，正處於這段歷史中一個轉折性的節點，每一個決定都將影響未來的脈動。`,
    story: "順應自然，守正待時。目前的考驗是天意的磨練，旨在塑造更強大的你。",
    poem: [
      firstLine,
      "前途吉慶保平安",
      "若問求謀何處好",
      "西方自有佛光燦"
    ],
    advice: `【大師開示】：求得第 ${id} 籤，代表你目前所問之事，已經進入了「天意觀察區」。大師叮嚀：不要急於在今天就看到收穫。就像種樹，根紮得深，未來的果實才甜。保持你的善良與耐心，正確的結果會自然浮現。`,
    luck: "運勢穩健上升。氣場清亮，適合進行長遠布局。",
    career: "職場有貴人提點，機會隱藏在細節中，需留心觀察。",
    wealth: "正財穩定增加。不宜冒險投機，守成即是賺錢。",
    romance: "感情穩定和諧。多一點溝通少一點猜疑，正緣將至。",
    education: "學習成效顯現。只要能專專注於本質而非分數，必有大成。"
  };
};